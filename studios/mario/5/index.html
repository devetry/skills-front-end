<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Mario 5 :: Unit 3: Front-End Web Skill Track</title>

        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/highlight.launchcode.css">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="https://djwbyvgln9kts.cloudfront.net/launch_ed_style/custom.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <ul class="nav navbar-nav">

                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle glyphicon glyphicon-menu-hamburger" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"></a>
                        <ul class="dropdown-menu">
                                                            <li class=" lc-button">
                                    <a href="/about/">
                                        About This Unit
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/course-outline/">
                                        Course Outline
                                    </a>
                                </li>
                                                            <li class="active lc-button">
                                    <a href="/studios/">
                                        Studios
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/assignments/">
                                        Assignments
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="http://eloquentjavascript.net">
                                        Eloquent Javascript
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="/issues/">
                                        Reporting Issues
                                    </a>
                                </li>
                                                        <li role="separator" class="divider"></li>
                            <li>
                                <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                            </li>
                        </ul>
                    </li>

                
            </ul>


            <div>
                <a class="navbar-brand site-title navbar-center" href="/">
                    <h1>Unit 3: Front-End Web Skill Track</h1>
                </a>
            </div>

            <div class="nav navbar-nav navbar-right">
                <a class="navbar-brand dabomb" href="/"></a>
            </div>

        </header>

        <nav style="position:absolute; width: 180px; margin-top:64px">
            <ul class="nav navbar-big-nav hidden-md hidden-sm hidden-xs">
                                                            <li class=" lc-button">
                            <a href="/about/">
                                About This Unit
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/course-outline/">
                                Course Outline
                            </a>
                        </li>
                                            <li class="active lc-button">
                            <a href="/studios/">
                                Studios
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/assignments/">
                                Assignments
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="http://eloquentjavascript.net">
                                Eloquent Javascript
                            </a>
                        </li>
                                            <li class=" lc-button">
                            <a href="/issues/">
                                Reporting Issues
                            </a>
                        </li>
                                        <li role="separator" class="divider"></li>
                    <li>
                        <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                    </li>
                            </ul>
        </nav>


        <!-- Search Modal -->
        <div id="modalSearch" class="modal fade" role="dialog">
           <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h4 class="modal-title">Search Unit 3: Front-End Web Skill Track</h4>
                </div>
                <div class="modal-body">
                    <script>
                      (function() {
                        var cx = "";
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                      })();
                    </script>
                    <gcse:search></gcse:search>
                </div>
                <div class="modal-footer">
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

           </div>
        </div>

        <main class="container-fluid">
            <div class="row">

                <section id="content" class="col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8">
                                        <h1>Mario 5</h1>
                    <p>Today you won't be adding any new features to the project. Instead you will refactor the existing codebase to use Vue.js instead of &quot;vanilla&quot; Javascript for manipulating the DOM.</p>
<h2 id="obtaining-the-starter-code">Obtaining the Starter Code</h2>
<ol>
<li>
<p>Navigate into your <code>mario-js</code> directory.</p>
</li>
<li>
<p>Make sure you do not have any uncommitted changes:</p>
<pre><code class="language-nohighlight">$ git status
On branch mario4
Your branch is ahead of 'origin/mario4' by 1 commit.
  (use "git push" to publish your local commits)
nothing to commit, working directory clean</code></pre>
<p>It should say &quot;working directory clean&quot;.</p>
<p>If you <em>do</em> have uncommitted changes, then <code>add</code> and <code>commit</code> them now.</p>
</li>
<li>
<p>Switch to the <code>mario5</code> branch:</p>
<pre><code class="language-nohighlight">$ git checkout mario5
Switched to branch 'mario5'
Your branch is up-to-date with 'origin/mario5'.</code></pre>
</li>
<li>
<p>Pull down the latest changes.</p>
<pre><code class="language-nohighlight">$ git pull
Already up-to-date.</code></pre>
<p>Sometimes, the staff might make last-minute changes to the starter-code. Running <code>git pull</code> here ensures that you will have the <strong>very latest</strong> version of the <code>mario3</code> branch.</p>
<p>Usually you will just see:</p>
<pre><code class="language-nohighlight">Already up-to-date.</code></pre>
<p>But in the event that we <strong>did</strong> make some changes after your initial <code>git clone</code> on the first day of class, running <code>git pull</code> now pulls down those changes, and you will see a different message outlining the changes.</p>
</li>
</ol>
<h2 id="take-a-look">Take a Look</h2>
<h4 id="preview">Preview</h4>
<p>If you open up the page in a browser, you will see that it looks the same as last time, but it doesn't function anymore. You can type in the textbox, but nothing happens when you submit the form. That's because we have started the refactoring process, and left some gaps for you to fill in.</p>
<h4 id="code-changes">Code Changes</h4>
<p>Let's look over the code. Notice the following changes:</p>
<ul>
<li>
<p>At the bottom of <code>mario.html</code>, we have an additional <code>&lt;script&gt;</code> tag right before the one that loads <code>mario.js</code>. This script imports the Vue.js library so that we can use Vue's methods in our own code.</p>
</li>
<li>
<p>We have refactored the code to (partially) use Vue syntax:</p>
<ul>
<li>
<p><code>pyramidRows</code>, instead of directly modifying the DOM, now returns a list of strings: one for each row.</p>
</li>
<li>
<p>We ripped most of the page out of html, and made it a view template</p>
</li>
<li>
<p>The &quot;Draw a pyramid&quot; button uses Vue's <code>@click="clearAndRedraw"</code> instead of <code>addEventListener</code>.</p>
</li>
<li>
<p>Vue will give the height input a class if <code>this.error</code> is set (that's what the <code>:class="error ? 'invalid-field': null"</code> bit is doing).</p>
</li>
</ul>
</li>
</ul>
<h2 id="your-task">Your Task</h2>
<p>Heads up: there's a <em>lot</em> of new things in today's class. If you get stuck, see if you can write down a reason that you're stuck as a google search term. Some examples:</p>
<ul>
<li>vue js display value</li>
<li>vue js input value</li>
<li>vue js computed property</li>
<li>vue js for loop</li>
</ul>
<p>You might also try looking through the <a href="https://vuejs.org/v2/guide/">documentation for Vue.js</a>, which is quite complete.</p>
<p>Now go ahead and complete the following tasks:</p>
<ol>
<li>
<p>Fill out the <code>checkForErrors</code> function. It should return an error message if the given <code>heightStr</code> value is the empty string, not a number, less than 1, or more than 100. If there are no errors, return <code>null</code>.</p>
</li>
<li>
<p>Since the error message from <code>checkForErrors</code> is being set in <code>clearAndRedraw</code> as <code>this.error</code>, it's available in our template. Use the double curly braces (<code>{{ }}</code>) to show the error message. Hint: you won't need to refer to <code>this</code>, the template assumes that's where your data is stored.</p>
</li>
<li>
<p>Currently the pyramids always have a height of 5, no matter what the user types. Let's fix that. Inside the template, add a <code>v-model</code> directive so that the input is kept in sync with <code>heightStr</code>.</p>
</li>
<li>
<p>Computed properties are functions on your view's data that are kept up-to-date. They're called whenever the data changes, but otherwise cached. Create a new computed property called <code>error</code> that it returns the result of <code>checkForErrors(this.heightStr)</code>. Also, delete the <code>error</code> entry in <code>data:</code> and the update in <code>clearAndRedraw</code>.</p>
</li>
<li>
<p>Fill out the other computed property, <code>rows</code>. It should return the result of calling <code>pyramidRows</code> on <code>this.height</code>. Use your new computed property towards the bottom of <code>clearAndRedraw</code>.</p>
</li>
<li>
<p>Now we get to the good stuff! We're going to get to remove that ugly direct DOM manipulation code (almost all of <code>clearAndRedraw</code>). Instead, we'll use a nice declarative template. Inside the <code>#pyramid</code> div in the template, add the following:</p>
</li>
</ol>
<pre><code class="language-html">&lt;p v-for="row in rows" v-html="row" /&gt;</code></pre>
<p>This says &quot;make a <code>&lt;p&gt;</code> for each entry in rows. Each p's <code>.innerHTML</code> should be set to the value of <code>row</code>.</p>
<ol start="7">
<li>Delete all the DOM manipulation code from <code>clearAndRedraw</code>. It should just look like this:</li>
</ol>
<pre><code class="language-js">// Stop the form from causing a page refresh.
evt.preventDefault();

if (this.error) {
    // Stop drawing, we've got errors.
    return;
}

this.height = parseInt(this.heightStr);</code></pre>
<h2 id="committing-your-changes">Committing Your Changes</h2>
<ol>
<li>
<p>Add your new changes:</p>
<pre><code class="language-nohighlight">$ git add mario.js</code></pre>
</li>
<li>
<p>Then commit, along with a descriptive message.</p>
<pre><code class="language-nohighlight">$ git commit -m "refactor to use Vue.js"</code></pre>
</li>
</ol>
                                    </section>

            </div>
        </main>

        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/js/highlight.pack.js"></script>
        <script type="text/javascript" src="/js/libgif.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.3/vue.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');

                // Syntax highlighting
                hljs.configure({ displayLabels: true });
                hljs.initHighlightingOnLoad();
            });
        </script>
        <script>
            $(function() {
                if (!location.pathname.match(/class-prep/)) return;

                window.checkboxWatcher = new Vue({
                    el: '#content',
                    data: function() {
                        var storedValue = localStorage.getItem('completedChecks');
                        console.log('storedValue', storedValue);
                        var hydratedValue = storedValue ? JSON.parse(storedValue) : {};
                        return {
                            checks: hydratedValue,
                        };
                    },
                    watch: {
                        checks: {
                            handler: function() {
                                console.log('storing check state');
                                localStorage.setItem('completedChecks', JSON.stringify(this.checks));
                            },
                            deep: true,
                        },
                    },
                });
            });
        </script>
        
    </body>
</html>
